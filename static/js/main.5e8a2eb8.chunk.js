(this["webpackJsonpnear-marketplace"]=this["webpackJsonpnear-marketplace"]||[]).push([[0],{177:function(e,t){},186:function(e,t){},232:function(e,t,c){},237:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),r=c(50),s=c.n(r),l=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,257)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;c(e),n(e),a(e),r(e),s(e)}))},i=c(16),o=c(8),d=c.n(o),j=c(112),u=Object({NODE_ENV:"production",PUBLIC_URL:"/near-maketplace-dapp",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).CONTRACT_NAME||"drugs.drugtracker.testnet";var b=function(e){switch(e){case"mainnet":return{networkId:"mainnet",nodeUrl:"https://rpc.mainnet.near.org",contractName:u,walletUrl:"https://wallet.near.org",helperUrl:"https://helper.mainnet.near.org",explorerUrl:"https://explorer.mainnet.near.org"};case"testnet":return{networkId:"testnet",nodeUrl:"https://rpc.testnet.near.org",contractName:u,walletUrl:"https://wallet.testnet.near.org",helperUrl:"https://helper.testnet.near.org",explorerUrl:"https://explorer.testnet.near.org"};default:throw Error("Unknown environment '".concat(e,"'."))}},x=b("testnet");function m(){return(m=Object(i.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.connect)(Object.assign({deps:{keyStore:new j.keyStores.BrowserLocalStorageKeyStore}},x));case 2:t=e.sent,window.walletConnection=new j.WalletConnection(t),window.accountId=window.walletConnection.getAccountId(),window.contract=new j.Contract(window.walletConnection.account(),x.contractName,{viewMethods:["getDrugList","getDrug","viewDrugHistory","drugHistory"],changeMethods:["setDrug","updateDrugPrice","buyDrug"]});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}c(238),c(230),c(231);var h=c(74),O=c(9),p=c(7),f=c(247),g=c(75),v=b("testnet");function N(){return A.apply(this,arguments)}function A(){return(A=Object(i.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=g.formatNearAmount,e.next=3,window.walletConnection.account().getAccountBalance();case 3:return e.t1=e.sent.total,e.abrupt("return",(0,e.t0)(e.t1,2));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){window.walletConnection.requestSignIn(v.contractName)}function w(){window.walletConnection.signOut(),window.location.reload()}c(232);var k=c(161),D=c(1),C=function(e){var t=e.name,c=e.login,n=e.coverImg;return n?Object(D.jsxs)("div",{className:"d-flex  flex-column  p-3",style:{background:"#000",minHeight:"100vh"},children:[Object(D.jsxs)("div",{className:"d-flex m-4 text-center",style:{justifyContent:"space-between"},children:[Object(D.jsx)("h4",{className:"text-start text-light",children:t}),Object(D.jsx)(k.a,{onClick:c,variant:"outline-light",className:"rounded-pill",children:"Connect Wallet"})]}),Object(D.jsxs)("div",{className:" row text-light mt-5",children:[Object(D.jsxs)("div",{className:"col-md-5  m-4",children:[Object(D.jsx)("h1",{className:"text-center mt-4",children:"Welcome to Drug Tracker"}),Object(D.jsx)("div",{style:{fontSize:"24px",opacity:.8,lineHeight:"5vh"},className:"mt-4",children:"Authentic stock is managed and tracked efficiently using blockchain technology. This is addressed by using the smart contract which helps to track the movement of drugs from supplier to pharmacies and finally pharmacies to patient. duplicate drugs, expired drugs and fake drugs are completely avoided by using the blockchain technology."})]}),Object(D.jsx)("div",{className:"col-md-1"}),Object(D.jsx)("div",{className:"col-md-5 mt-4",children:Object(D.jsx)("img",{src:n,alt:"",style:{marginTop:"5vh",width:"80vh",height:"40vh"}})})]}),Object(D.jsx)("p",{className:"mt-auto text-secondary text-center",children:"Powered by DrugTracker"})]}):null};C.defaultProps={name:""};var E=C,S=c(2),I=c(51),q=c(253),P=c(252),Q=c(163),T=function(e){var t=e.save,c=Object(O.useNavigate)(),a=Object(n.useState)(""),r=Object(p.a)(a,2),s=r[0],l=r[1],i=Object(n.useState)(""),o=Object(p.a)(i,2),d=o[0],j=o[1],u=Object(n.useState)(""),b=Object(p.a)(u,2),x=b[0],m=b[1],h=Object(n.useState)(""),f=Object(p.a)(h,2),g=f[0],v=f[1],N=Object(n.useState)(0),A=Object(p.a)(N,2),y=A[0],w=A[1],C=Object(n.useState)(!1),E=Object(p.a)(C,2),S=E[0],I=E[1],T=function(){return I(!1)};return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(k.a,{onClick:function(){c("/inventory")},variant:"dark",className:"rounded-pill px-0",style:{width:"38px"},children:Object(D.jsx)("i",{class:"bi bi-plus"})}),Object(D.jsxs)(q.a,{show:S,onHide:T,centered:!0,children:[Object(D.jsx)(q.a.Header,{closeButton:!0,children:Object(D.jsx)(q.a.Title,{children:"New Product"})}),Object(D.jsx)(P.a,{children:Object(D.jsxs)(q.a.Body,{children:[Object(D.jsx)(Q.a,{controlId:"inputName",label:"Product name",className:"mb-3",children:Object(D.jsx)(P.a.Control,{type:"text",onChange:function(e){l(e.target.value)},placeholder:"Enter name of product"})}),Object(D.jsx)(Q.a,{controlId:"inputUrl",label:"Image URL",className:"mb-3",children:Object(D.jsx)(P.a.Control,{type:"text",placeholder:"Image URL",onChange:function(e){j(e.target.value)}})}),Object(D.jsx)(Q.a,{controlId:"inputDescription",label:"Description",className:"mb-3",children:Object(D.jsx)(P.a.Control,{as:"textarea",placeholder:"description",style:{height:"80px"},onChange:function(e){m(e.target.value)}})}),Object(D.jsx)(Q.a,{controlId:"inputLocation",label:"Location",className:"mb-3",children:Object(D.jsx)(P.a.Control,{type:"text",placeholder:"Location",onChange:function(e){v(e.target.value)}})}),Object(D.jsx)(Q.a,{controlId:"inputPrice",label:"Price",className:"mb-3",children:Object(D.jsx)(P.a.Control,{type:"text",placeholder:"Price",onChange:function(e){w(e.target.value)}})})]})}),Object(D.jsxs)(q.a.Footer,{children:[Object(D.jsx)(k.a,{variant:"outline-secondary",onClick:T,children:"Close"}),Object(D.jsx)(k.a,{variant:"dark",disabled:!(s&&d&&x&&g&&y),onClick:function(){t({name:s,image:d,description:x,location:g,price:y}),T()},children:"Save product"})]})]})]})},H=c(162),B=c(255),K=c(256),U=function(e){var t=e.product,c=e.buy,n=e.index,a=e.increaseQty,r=e.decreaseQty,s=t.selling_price,l=t.balance,i=t.generic_name,o=t.drug_name,d=t.image,j=t.owner,u=t.sold;return Object(D.jsx)(H.a,{children:Object(D.jsxs)(B.a,{className:" h-100",children:[Object(D.jsx)(B.a.Header,{children:Object(D.jsxs)(K.a,{direction:"horizontal",gap:2,style:{display:"flex",justifyContent:"space-between"},children:[Object(D.jsx)("span",{className:"font-monospace text-secondary",children:j}),Object(D.jsxs)("div",{className:"text-end",children:[Object(D.jsx)("i",{className:"bi bi-plus",style:{cursor:"pointer"},onClick:function(){a(n)}}),Object(D.jsx)("input",{type:"text",className:"text-center ",value:u,name:"sold",style:{width:"35px",border:"solid",borderRadius:"20px",height:"20px"}}),Object(D.jsx)("i",{className:"bi bi-dash",style:{cursor:"pointer"},onClick:function(){r(n)}})]})]})}),Object(D.jsx)("div",{className:" ratio ratio-4x3",children:Object(D.jsx)("img",{src:d,alt:i,style:{objectFit:"cover"}})}),Object(D.jsxs)(B.a.Body,{className:"d-flex  flex-column text-center",children:[Object(D.jsx)(B.a.Title,{children:i}),Object(D.jsx)(B.a.Text,{className:"flex-grow-1 ",children:o}),Object(D.jsx)(B.a.Text,{className:"text-secondary",children:Object(D.jsxs)("span",{children:["Quantity Available ",l]})}),Object(D.jsxs)(k.a,{variant:"outline-dark",onClick:function(){c(t)},className:"w-100 py-3",children:["Buy for ",s," NEAR"]})]})]})})},R=c(246),Y=c(254),W=c(36),J=c.n(W);function L(){return window.contract.getDrugList()}function z(e,t){return window.contract.updateDrugPrice({drug_code:e,new_price:t})}function V(e){var t=J()().format("YYYY-MM-DD");return e.drug_code=Object(Y.a)(),e.id=Object(Y.a)(),e.balance=parseInt(e.balance),e.unit_of_issue=parseInt(e.unit_of_issue),e.reorder_level=parseInt(e.reorder_level),e.insert_time=J()().format("YYYY-MM-DD hh:mm:ss"),window.contract.setDrug({drug:e,receive_date:t})}function F(e){return M.apply(this,arguments)}function M(){return(M=Object(i.a)(d.a.mark((function e(t){var c,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.drug,n=t.qty,c.insert_time=J()().format("YYYY-MM-DD hh:mm:ss"),e.next=4,window.contract.buyDrug({drug:c,receive_date:J()().format("YYYY-MM-DD"),qty:n});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var X=c(245),G=c(24),Z=function(e){var t=e.size;return Object(D.jsx)("div",{className:"d-flex justify-content-center",children:Object(D.jsx)(X.a,{size:t,animation:"border",role:"status",className:"opacity-25",children:Object(D.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})},_=Z,$={size:c.n(G).a.string};Z.prototype=$,Z.defaultProps={size:"sm"};c(236);var ee=function(){return Object(D.jsx)(I.a,{position:"bottom-center",autoClose:5e3,hideProgressBar:!0,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!1,pauseOnHover:!0})},te=function(e){var t=e.text;return Object(D.jsxs)("div",{children:[Object(D.jsx)("i",{className:"bi bi-check-circle-fill text-success mx-2"}),Object(D.jsx)("span",{className:"text-secondary mx-1",children:t})]})},ce=function(e){var t=e.text;return Object(D.jsxs)("div",{children:[Object(D.jsx)("i",{className:"bi bi-x-circle-fill text-danger mx-2"}),Object(D.jsx)("span",{className:"text-secondary mx-1",children:t})]})},ne={text:""};te.defaultProps=ne,ce.defaultProps=ne;var ae=function(){var e=Object(n.useState)([]),t=Object(p.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(!1),s=Object(p.a)(r,2),l=s[0],o=s[1],j=Object(n.useCallback)(Object(i.a)(d.a.mark((function e(){var t,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(!0),e.next=4,L();case 4:t=e.sent,c=[],t.forEach((function(e){c.push(Object(S.a)(Object(S.a)({},e),{},{sold:1}))})),a(c),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log({error:e.t0});case 13:return e.prev=13,o(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,10,13,16]])}))),[]),u=function(e){var t=[];c.forEach((function(c,n){n===e?t.push(Object(S.a)(Object(S.a)({},c),{},{sold:c.sold+1})):t.push(c)})),console.log(t),a(t)},b=function(e){var t=[];c.forEach((function(c,n){n===e?t.push(Object(S.a)(Object(S.a)({},c),{},{sold:c.sold-1})):t.push(c)})),console.log(t),a(t)},x=function(){var e=Object(i.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{o(!0),(c=t,c.id=Object(Y.a)(),c.price=Object(g.parseNearAmount)(c.price+""),window.contract.setProduct({product:c})).then((function(e){j()})),Object(I.b)(Object(D.jsx)(te,{text:"Product added successfully."}))}catch(n){console.log({error:n}),Object(I.b)(Object(D.jsx)(ce,{text:"Failed to create a product."}))}finally{o(!1)}case 1:case"end":return e.stop()}var c}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(i.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F({drug:t,qty:t.sold}).then((function(e){return j()}));case 3:Object(I.b)(Object(D.jsx)(te,{text:"Product bought successfully"})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),Object(I.b)(Object(D.jsx)(ce,{text:"Failed to purchase product."}));case 9:return e.prev=9,o(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,6,9,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){j()}),[j]),Object(D.jsx)(D.Fragment,{children:l?Object(D.jsx)(_,{}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[Object(D.jsx)("h1",{className:"fs-4 fw-bold mb-0",children:"Buy Drug"}),Object(D.jsx)(T,{save:x})]}),Object(D.jsx)(R.a,{xs:1,sm:2,lg:3,className:"g-3  mb-5 g-xl-4 g-xxl-5",children:c.map((function(e,t){return Object(D.jsx)(U,{index:t,increaseQty:u,decreaseQty:b,product:Object(S.a)({},e),buy:m})}))})]})})},re=c(251),se=c(250),le=function(e){var t=e.address,c=e.amount,n=e.symbol,a=e.destroy;return t?Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)(se.a,{children:[Object(D.jsx)(se.a.Toggle,{variant:"dark",align:"end",id:"dropdown-basic",className:"d-flex align-items-center border rounded-pill py-1",children:c?Object(D.jsxs)(D.Fragment,{children:[c," ",Object(D.jsxs)("span",{className:"ms-1",children:[" ",n]})]}):Object(D.jsx)(X.a,{animation:"border",size:"sm",className:"opacity-25"})}),Object(D.jsxs)(se.a.Menu,{className:"shadow-lg border-0",children:[Object(D.jsx)(se.a.Item,{href:"https://explorer.testnet.near.org/accounts/".concat(t),target:"_blank",children:Object(D.jsxs)(K.a,{direction:"horizontal",gap:2,children:[Object(D.jsx)("i",{className:"bi bi-person-circle fs-4"}),Object(D.jsx)("span",{className:"font-monospace",children:t})]})}),Object(D.jsx)(se.a.Divider,{}),Object(D.jsxs)(se.a.Item,{as:"button",className:"d-flex align-items-center",onClick:function(){a()},children:[Object(D.jsx)("i",{className:"bi bi-box-arrow-right me-2 fs-4"}),"Disconnect"]})]})]})}):null};var ie=function(){var e=window.walletConnection.account(),t=Object(n.useState)("0"),c=Object(p.a)(t,2),a=c[0],r=c[1],s=Object(n.useCallback)(Object(i.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.accountId){t.next=6;break}return t.t0=r,t.next=4,N();case 4:t.t1=t.sent,(0,t.t0)(t.t1);case 6:case"end":return t.stop()}}),t)}))),[e.accountId]);return Object(n.useEffect)((function(){s()}),[s]),Object(D.jsx)(re.a,{children:Object(D.jsxs)(f.a,{children:[Object(D.jsx)(re.a.Brand,{href:"/near-maketplace-dapp",className:"fw-bold",children:"Drug Tracker"}),Object(D.jsx)(re.a.Toggle,{}),Object(D.jsx)(re.a.Collapse,{className:"justify-content-end",children:e.accountId?Object(D.jsx)(le,{address:e.accountId,amount:a,symbol:"NEAR",destroy:w}):Object(D.jsx)(k.a,{onClick:y,variant:"outline-dark",className:"rounded-pill px-3 mt-3",children:"Connect Wallet"})})]})})},oe=function(){var e=window.walletConnection.account(),t=Object(n.useState)("0"),c=Object(p.a)(t,2),a=c[0],r=c[1],s=Object(n.useCallback)(Object(i.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.accountId){t.next=6;break}return t.t0=r,t.next=4,N();case 4:t.t1=t.sent,(0,t.t0)(t.t1);case 6:case"end":return t.stop()}}),t)}))),[e.accountId]);return Object(n.useEffect)((function(){s()}),[s]),Object(D.jsx)(D.Fragment,{children:e.accountId?Object(D.jsxs)(f.a,{fluid:"md",children:[Object(D.jsx)(ie,{balance:a}),Object(D.jsx)("main",{children:Object(D.jsx)(ae,{})})]}):Object(D.jsx)(E,{name:"Drug Tracker",login:y,coverImg:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHCBISFRgSFRUYGBgYGhoaGBgYGhkcHBgYGhgaGRgYGRkcIS4lHB4rIRgYJjgmKy8xNTU1GiQ7QDs0Py40NTEBDAwMEA8QHxISHjosJSw0NDQ0MTQ0NDE0NDQ0NDQ0NDQ0NDQ0NDQ2NDQ0NDQ0NDQ0NDQ0NDQ0NDE0NDQ0NDQ0NP/AABEIALQBFwMBIgACEQEDEQH/xAAcAAABBQEBAQAAAAAAAAAAAAAAAQIEBQYDBwj/xAA/EAABAwIEBAQDBwEHBAMBAAABAAIRAwQFEiExBkFRYSJxgZETMqEHFEJSYrHRwRUWcoKS4fAjU7LxJDPiF//EABoBAQADAQEBAAAAAAAAAAAAAAACAwQBBQb/xAAtEQADAAICAgEDAgUFAQAAAAAAAQIDERIhBDFBIlFhE3EFFDOBkUJSscHRI//aAAwDAQACEQMRAD8A9YZdMcJBlRLio3dVrKjabcjNAFwqXU81Bv7lVZ/9pNqvB2K4WlUPcWzqFXvuw2TKr8Fo1C99UvgHQD+qx56Udmzx8vKXyNTXfl0G6ra1y8OkOPoo9W7h+V2/VI943WB5m63vo1xKaHY5j9WjSNRrS+NwFkbvGX3RbO8TlGsLZWLqdRpJhwGhChCjQD3PpsAOxIC2zVVj7ZbjqMLb12ZrB6r33DGNBzTr2HMlerWoYwd+ZWZsqzGvLw1ofEExqulK+JqEO0byPUq6KmVsqz5Hnr1oW6N6bkupwKJA3Os9grulXeB4iJVc+67ptWoHNmdF2b3XRXw31oWrf22YyQCd+inW9vTfqAIWPu6DDJ1BVrgeJj4IAOoJB91OuPsneOpRa3eDUKrSyHCeYJWUvPs5B8VK5eP0mIV4zEjO6saFzPNcTl/BS3S+SqpYPToUw0tBgauPNPwtlKnOQAZjurWu4OYQeYKydo+oHfCyHMCYjmOS7krc6SL5pVOqNYHrjcWtOpuNeoXeww94HjPoP5Vgym1uwSMVNdmassy+jE4vhlRgDqbHP1+UBVV7h2Iub4GOZ1Ear05Cm8E72RXkVrRj+HfispAVGOzcyQrV9zl1IPsroiVX4rb1CwmnuAfD18u6PD+Qs3for6F+ypIaZjdOfXc0aFZnh5ty8veWZGFx1foT/lWjfQc4biVncUXc5OQxF2xEquN1UbVIAJaRIPTsle8Nf8N/hPLofIp2W5LjkpktGx6ruOHVcaL54stKN11UpmHsdOfxTyOyrWWldwBLQCDzKuqDpHdaKiekZqly3pnF1gxrYYMsclwpuAVrlVDiFT4b4PPZV1HzJ3Hunol1agcCCqY3TqLsp+U7fwreha5gC50dgpn3Knp4M0bEqtRT/BLmp69lTTIuBqwkdwlV1ttA8kKWkv8AUQ5/gy9eqq+5vm0xJPoqO6x3MRTZ4nfspVrhJqEPe4z9ArVLpGbD4brt+js+jUr03k5miPDG6m8PCpkALXadQVPw+rTo+F5LiOyu7bF6R/CR6KjN4byzpvRqrC56lFXiVqKjCIcDGhAOiqsOs3Gnle8k6wdtFum3TSJA+ij1mU3GS0Sq8PiY8bfJ7GK3PtFRhOFU6NMskmSXOce6e66ZT8LGNA6xqVyxC5yDJsSfoq4vVGfNquM9aLVLfdD7kNqOzDwu6jY+ag/ew/NTeQ14/wCSFJqEjcQsXxTekV2hgJdlE5QTz5wmCqutEqlKdomvx2o2r8BzSTyI/L1VxeYkWtaA6OwU3COHKRYKtR2ao5kTtEjaFk8SovpvNN+hG3QjqE8mckevTNvgKMjar2ixxK/mn4XS6NeypeHa13UeTTHhnXNsoF9iQptLRvC9C4Kt2fAY9o+YeynhuuP1fJLzOEtKf7kNv3uY+Bp1zJP7w/BeKdVrmOPyiJzeUbraikuN1h1OpDnNBc3VpI1HkrpXZ5tNM52pfVaD8oPXdXNtasYAQPVVGDXoe99LLlLBqD5wr8LXila2ZMtPehSUkJ0JYVpSMhOaEsIhANKCUpK4vePQboCsvQ1r4kA7ri0lQceFQvFRrZEaxvv0Vda4iDzgql0tld1cv10XdajTc5r3tBLTInkp1xjFOmAJ1OgAVXQuTHIqQ2qw7sHsucvsTjyF6pHQ1Z1krvbPXB7GuByyFBsLh7XPa9pgHwu5FKo0zU2tpmjBWa42llEVh+BwJ/wnQqzdczESm3mWsx1MtkFpBB5p8EpVJ7Rm8Jx41GiAfOFduxJ5GgJ7BGHYE4MGbKwx8vTzT34VWb8sEdiq6mzvKSNTvnlpc4Ea7IXO5BpyXgtHU7e6F4+b+GPJbrmy1X+DnbYJb0hIY0d1MD6TOn0UevdUyCCRCyuA1PvdxVpNJyUjBdvM7AL3Kx0vRepSX1Mt+IMXpUWfEAGhEnsuHDuMMu6mRkENGZx6Dl7q2vMDt3ty1KWdvR0n1UfhrDrW2+I6iA0Pd4teg0AnYartOonth00vp9Gm0AiUhHQqBVv6U/O33C5vxKm1pIOg58llrJKXZQoopuJa7vi0mtElzsunlJV/a27KTASJdGpKhUqrP/sABcfxdAeQ6Lqyv8Twt9SeS+d8jynkycca2WOHrs54ziLBTdPkI3J5ABRMPsS4Z8gBP5olTrHhrKfiPe95G0gQPIK1OGvcPC6PMLdiXm4P6cp7+X/0RjLMrWygfY1qhLWPyRu7kPIc1zu+Fm1ABVqvefQKzqWd3bue8Fj2QCGiQ4QNd91Ap8TyYNMknoVvrJlqV+otP7HVbp8pKO/+zq3qAhrntPIgz9CrLh61dZgW7n5o+U7SPJa2ja1Xtk5WE8vmI81jse4axFtwy5pubVYwnMxpyuyneGnQ+66seVr8EFlnb2aZ15TjVwUinJ1WcsazXVQx4LXRIa4QZHYrRCpClLfyKSXo50cPLbj7wH6FmRzIGush09Rr7q1Y9Q2ydz7J8d1pi9dGe532TmuTpWbvcb+7ODarCAfle35Xfwey5/3roHYvHp/utCafopctGnzpC8dVnv7xU3fK1x84SPxN7hpDR15rlXM+wpbLqvXDRJ0Cp8RxinTbne4NbyE+Jx6AKNVFV48Grj+J8wO8c1Vt4bt85qV3vrVDvLjp2AGjQs1+Sl6Low/clUsZFTYb9Vl7HD7uo59QMAYXOykuAkSdQFo7bhwue8NfkYfkjVwB81bW+B1KDA1j/iADQEZXeh2Kw535CjliWy25x1qaZmGsr0yGlrp7Cf2VhSq12/Mx8f4Sr7DLkFslpaZMhwhzSORCsviBw01V3iq3CeR9/K+xmvx530YyljHj+HmgkHTYmOSkULzLo46ciu/FGHZ2io0DOzUGNR5FZKljLXuFN5yvHI7GOYVl7T6LcWJTJsH1p5+o/ooVXEX0Hy/VnJw/Y9FQ0cRfTPItJ2nYdlcW91RrMyyHSIcx2+o1EeinGVr2XzXHr2ieMa+I3wmB16pWcQCm7KXaHaSss+1q06raDB4HCQ/kxo3Du/7q5q4BbOyufmc5o3zEA+gWrluOjQ4x8dI0wxRj26wQeR1QqyhbMaMoY2PdC8/+aRm/SRF/u2Lq7quL8tuwtHw2GC55aHOzEbN1Gg6rWWGGULduSlTYxvRoAnuTzKwXCeH3Vm6oKldtT4hzOc3PJfsTDonSFrqfxKgOW41G4ywR5rdyKrnJ1v0WV/dNpNzOE8gBzJ5LJXLw8uOUNzbgD677rhfXtRhdTd43gy05pGUD5z01JEbkjzIpX39WfmHllEfz9VVSqv2NOCJlbr2Lf0RTcCDoVPoYS+6YQ5xYxwiR8xHaeXdQ6eItdVY2o0SOXJ3RwnocuncLY2Z+L8uvU8h5rxPJ8qseZRMbey/I+Mpr00Vlvw+xjG0w95a0QJdr6mFb4HhDKcuEnX8RJ166q3o2jWjaT1P8ckym5rHFgET4gPoY+nuvWx+LjTV8Un7/ALmGs7qXKJUpr45pHhx2gDmuFzUylazMht7bfEaQC5pPNv8AULz7EaT6Dyx8SNRA0cORC21zitOmJe4NHf8AhYjijiK3q5YBls6yBM8vLRU5p5Lr2bvEtxWqXQ22vawd4HPB6NJ/Zamz4iexsVgC4dCJI7gaSsHhuNVKhyBkMOgeAGtnkHEaa9VNdG/iqdcgMA8vEs3O4ekehWLHmW2v/S/x/HrZ9E1cvjZJboJaY3zdFE4a4lZctY4wCRoe/NpWeuKhLcjyxrYcCNC4h3IwqXDLehbS1lWo6d5ykA9QAJHup92ttaZlvCorU9r/AIPYW1E11aOa89pcR1meDPI6kA6ea02GU61doflc6eZBA9J0UXyKXKXsbxgx1e0qCmfExudp6uZrHqJHqs99nvDla8pC5uapaw/IxoAc4DTM5x2B5ABbmphtctIa0SQd3ADbnEqJwfgl7aUhSruokNnLkc4w2ZA1aNphX4uWu0UZOPwy2Zw1aNEBrvPO6f3XIYEykJpy8jXxuLj6ErvfXLqTmgtcS4w2ATJ3gRz0PspLRXI+QD/E4f0lW1CpaZXLc97Mpe4g7UF2UDcbDvKi2GItqktpeMjdw+UebtvQLOcdcDYtcV6lem1rqbiC2m2rqIaATlcGiSQTup/2bW1yKTqFRr6Rouh7XshxLiSIkbQN15vlePlUf/Pt7/x+S+c077NDa2dy2t8Z1xpt8MM8EdJmZ7rTUcSp7OcARuo7aTAIifNNdbUzqWN9gu+Hh8vH/VpNfYryXNfBIuRSqtMOGaNHN3Hn19VTWNrdRNRzGu/QXEfVWVOmxgJYI5n0/Zc7DEaddgqMktOxII/9rTlTb9f4JY310c69KuRAcx3+Jp/cLybj/CrqmTVNKGDXOzUN7nm31Xs7nqg4tuiy1rEU3P8AA/QCRqCNRvCiuUv1sl7RB4N4JIoMqXji97mhwYDDWAiQHEaud15LY08MtaYhtKm2P0tn3Oqr8KxUVaDHsIILGEEHkW7Lodd5/wCd1ZWWZekipTT9slvsLZ/4Wg9W6H6LJ8XvfZta+S5r3tY0gah7tGtIHr7K/ncKNiFq2u1geZFOoyq0cs7JLQR0194XJ8j4aLodQ9p7/DJVhb5GjNq6NeyFVDHGmWzqD9RuhdVSjjVN7KW4xtjXFrGOqEGCW5Q0EbjO46+krnVx97B8RrHsdGWXFrmOnYEtOh8wFTurhjSIPg5DoFwp4xSqsfTIcGuEZiJAPIk8hMKXFet9mzlvvXQ/C8dNZlQuOao5znGYAaxoAGnY5tO6g2WI1q1RzGhhyk7nKIG5nksVc1qlGo4atMn3O/vv6qRhVGtWdlpNe8/iDAdj+Y8h5p9XwQmpba+S94gxDNkewwQ47ci0Dn5yvWOAcQY6zpOJGZ5cXH9WdzfoAAvJLjhLEnhv/wAfQGdH059s60XBYq07x1i5r2sY34js4LSToCB+kkjX9JRYknya77Kc7bfF+j2jOkY0TPPqoVGspTHyrEzI50FSsG7lYbjLiYU3soMID3SZ/K2Q2fr9FoMdsrgtc63Ic4AnI4xJ6NdtPnHmvnrHbq5Fw91w1zKkwWuBBaBsIPLvsUe9dE44prZpL/EM1x8M1zlO7nHQa/TqtHbYHb0wHuJeT+J4J9mD+p9F5xg9wH16eYCM0nvAJE9dl6Je4s0sDRy3/lYPIy1jel7PY8fCsy2vXon5aIIAZnPLNqB5MENHspDzVcJJDG8sxjTs1UtPiHK0AZWkT4oEn1XK1rVLjxzDfzO1LvIdFDm6W9mlYePxo4Y1So03Z/FUnk05Wg/wqW5xCoRDQym3tv781rH4bTqDK8lwmdCR+3moNzwraOBHjaTzDyfo6VfNddme8b5bki8IWle4uKJo0xVZScTWe+AzaWNk7kHWACvcmTGqw/2bWbLOm+2Lw7M8vaSIJBaAQe4yrc59JWrHrj0eRn5c3yRF+/tz/DAdm5iIgdTKk+a4NGZ2eI0iY1IBJ5+ZSucRznz/ANl3ZVoeXwuwqAiQq64rgCZjr2Xl/EfHrbe4fSDX+EN8THDciYI02Ec1zk99HXK1tnsMqm4pxBlrbvruIBZliecuAjy1WS4Vxi4v2mo19RlMGM748RG4YJkx12VzimA0bqmaVZz3tcQXeMgmDIBI1iQD6LvI6sbK2nxcCA7IHDqHR/RIeLidBR93/wD5UCv9mtnH/QrXFE8sr8zfVrhr7hed8V4FfWNQMqVnPY6cj2uIa6N2kT4XdvYlcX7nKlr2jdY9xnkAYXNDnkAMbvBMa81rqGI0w0N0aAIA2AA6dlQcD8OWdvRZUFNtWs5rXuqObnIc4AlrJ+UCY01MarW1bzLo6QO4XnZfNUv6U/3LYriu0RhiFM/iHuElbEqbR87fIGf2UDFLW2rg5YY/k9ojX9Q2I77qisbhtNoBYDUglxdqGQcuUdT37K/BlWb0zRPCls6cEYhSL7pjIDfjuLG8gC0SANgC7MY6krZkg+SxrMUeDqGkf4R/ROxjic2zG1WtzDNke3NBEzBBgyNDy5qWTA/aezjlP0a4u9/+ad0178ok6aT9N56Lz3/+hNO1N88vEwD3H8Ktxnie5qUXPDcjdmgTqToCSfmjfkFVOKm/RW6lfJR4hjz/ALxVLJIdUqFjWyTlzEjQdtUL0D7G6VGnbPrPaPiPqOBeRLsrYAbO4EyfVItnCSjmzz3Ecfe6nlB8T9XEdSNdfVQLPHKtJjqbXANdo7TUtiCPUKnqPjwn08uS5NrQnEv/AF0XOI3PxKB6NeyCdy7K4f8AiP2XonA+IW9O3YwQDALjzLjuT1K8tqVC+3AA+SoS6Oedoyk/6HBMsr+rS+U6dFbP0kYzSrdNdM9+/tSnHzLNXPFdOlcsmIcCwu/KDB1PSWheY1MeuDzhGF1XVKoY8yHTqfwkCZnpou09rRZfkTrUo+gbHEWPALTurqjWB2Xz9g3F77Z4GUmkIG5zR+bX9l63hGM06rQ9jg5pEyFQ05KNqjXNeqTiTALTEGZK9OSPle3R7f8AC7+my61cRDWqLSxYA8inI5xPEuL+Eq2FVA6c9Jzv+nVAjUa5HDk6PQ6+ld/acjf0lex8dZK9jcB0GGF7ez2eIEe0eq8GdTSom/Zfh8nJg2p9Mn1sSOwP+y9AwrEabqbGyGuDWjLsDAGo8915YWrT8K2NXEKrLWmPFBJcflaxsS5w7SB3JCheFa+k04fObtvK/wBjcfehK6sqrYYL9n9lbtGYOrP5ueSBPZgIaB5ye6uX8O2ZGU21Ejuxn8Kv+Wr7llfxLEn1LPKb7HWUZLH+ICZb+GJ1kc+y13BmOV74yKmamzR7oGriNGz1jX26p3Ev2cWdem74ANCoRoWklhPRzDsD+mFYcNWDMPtmWwiWNBeR+J5Evd31n0AVsRwXZk8jPOZrivj5NIXjZcKj1XMxFs67JlzfDK52wU+RmUlXxHifw2ODdXEQB35Lx+/weq97nljnOcSSZmSfVdeKOJKla4zU3ENY4hsbOOxJHMK/sboVGNqREjUdDsR7q3HCa79ld1/gsOD8WNrQZRe0jLm05jM4u9d1pxxNQ/MR5tK8e4gxOvTuCGugMAAECDIBM9d1HbxNW/Exp8pCpqGqemaozTxSpHttPiCg78Tj5CPqVKoYZb4i1j6zA+mx5cxhMtc4AtLn/mAkiNuq8Hq8UVyIaGt76kr0v7M+Lmm2FB7ofTLpnTM1zi4Ee5Hoky09sjkyTS1J6pTa1jQ1rQ1oEBrQAAOgA2SvDXjK4BwO4Ikeyz7+IKf5h7ri/imi0fOPdWPRnUtmH+03C6lm5lxbvc2m9xa5kk5HwXAtP5SA7TkR3078MYe74TX1pLy0SDpuZk99lQ8d8Wi8q0qFMy1lRrnHkTOWO+5WyfdBoMDNt5bLLkURpro3+Jj5N/I99nTP4R6brHcSYK+vcUbc1MrHvgnmPC5+20wHAdytTZ3RqmA1vvH1VDxk9xpA0/nD2vkHxD4YO3cJizKtaZp8nDxl7+xqsO4Jw6k0D4DXnm6rLyT1h3hHoAFOdw5YRl+60Y7U2D9gsfgHHbywCs3P+tsA+o2P0WoocWWb93uYejmn9xIWxNHjNMdbcMUKBJtnPoZjLmtOZjjESWVJAPcRsEq6f3is/wDug+TXfwhOhtngmNW3w6rmdNvKNFW5QtfxFhzqhFRokgQ4dpkH91l/hQYOilS0x7LPhiDUdScJa9hBHdviB/8AJWd7w1JzMdP6XafVHD2G5XfFIIABDc2hJO7o5CNPUrRSpzO12cb0+jIM4erTGWO8j+VZUcAFNj3Ey/I4NA2EggnuYn3V9KWVLig6bPPqtvCk4Ri9a0fmYfDPiYfld/B7q9xTDRq9g05jp5dlnq9CFnqddMkn8o9ApcV067JaYcB4mHcfyO6iMx8h2pXn7mEagkHqNFzdUqHd591HiiXNnpt7fm6pGnLgx25HMTMCeWiwF5Yupkg8if8A2rLh7FnNIovMtOjSd2nkO7f2WiubWnUEPHqND7qxQnPRxZO/q9GFoWhf0AG5JgBbT7KrxltfOBPz0nMHLMQ5j4E84BPoi3wylTMhsn9WsemyicQWoLPiMEPaW5XNMHfqOY5FP06S2Hc+kj36niVJ342g9CQD9U51/SbvUYP8zf5XznR4yvWDI/LUA/OId6uET7IfxnW5UmA+ZKj2c6Pb8f4kpUqbiw53AaRtPnz9Fj2cSufTb8TR+UZuhMcl5biGO3dwIc8ho1yt8Ikdxqfdd8Qxh7qTKbT4srS9/Oeg78yuOU12FWvRvG8QeLdQeKeKoomkx3jfoY/C3mfPl6rz371WOmY/SUMaSddT1UP0/km7etFjg2EVrl2WlTc+N8o0Hm7YepW+sOG7ulTANI8yQHMJ17ArWYCaNK3pMZlaMjDG0ktBJnmSean/AH2mPxt/1BfPZf45mjI1EdL7ly8eWu2eP47g1Rzy8N8WmZjtHAgRpPZZytaFpgscPQr2HiytTe1jmwSCRm6iNu4WbDl9B4eX+awrLrTftGe/oriYS3w51TQMcfQpbplSgTTa4s2zZTBJ3GoW6zKsxTDhUOYb8x/ULQ8eiPLZlf7WuQIzk+f8qLXvqz/mcY6BWVxhrgdlzp4S9xj/AJ7KOgthw9ZfFfmmMhDj13kR6hbG4xwhmUbnmqnD8ONsypUnxFhgdIBI+qz4vzEHcc+qz+ThdaaPU/hvkY8XJX/Y0lLGKjTo6PJQsfxBz6OUE6uE9xBkfT6KkN33VphNIXTKlN2kFpa7mCJ+n8qrF42qTXwafL8/HeJyl2yht7upT+VxHbceysqXEFQbtafcJ9xgdZn4Mw6t1+m6jfcKn/bf/pd/C26PB2Tm8TVB8tNg8yShMt8Iqu2pkd3afvqhd0NmylM+Eyc2Vs9YE+6WUSryI6USmyiUA6UsrnmSygHyqnEcPmXNGnMdPJWcpcyjUql2E9GKuqMKEWrZX1g18kDXmP4VL/Zr80ZXR5Kly0T6ZCs6JLhHULcyqyys8sEgCNhznqSp+ZWQmvZFsfKbVYHgtOxSZkSrDhU3GCk/K8f5h/ChjAKk7s+v8LRZkmZQ4IcmVdDAm/jdPYafVVOK2ga92UQJ0A6clq8yjXdqKmvPvsfNcqeujqr7mJyKxw60L3AAbqezB35tWiPMQri1thT10ntsPJQUtvsltIrKvFVzQcaLQ1zGeENcDOnOeXkop4vrTIptB6yT9FKxPC3PJc0B06xsQqxmEVZ+Q+pH8rI/GxttuOyat66ZeYPjNW5zCpqW6gjQQeUclZyq7CrH4QJMSeQ2CsJW3DPCUktfgqp7Y6USmyiVacHHVJoEkolARsSdFJ5/SVg3sW/uaedjmfmBCxl3bFhgiCNx/wA5KjJ7RbjW0yvDQtLwnoH/AOX+qpKVq5x0C1GB2ZpscTu4j2G37lI9nKWkWsolNlEq4rHShNlC4BcyQlNlISpAdKWUyUAoB8pZXOUSgOkolc5SygHkolMlEoB8pJTZSSogfKJTJRKkB8olMlEqIHylBXOUsoDpKSUyUSgHyiUyUSpA6ZkkpkolRA+USmSgFAPlEpkolAOlcbi3ZU+doP7+6fKSUCejhSsabNQ0esn91JlMlEokl6DbfsfKJTJRKAfKEyUqASUkpJRKAWUApsolAPlEpsolAOlEpsolAOlEpsolAOlISklJKAdKJTZRKAfKJTZRKAdKJTZRKAdKWU2UIB0olNlEoB0pJSSiUAsoBSSiUAsolNlEoBZRKaSklAPlEpkolAPlEpspJQDpSJJQgElEpkolAOlEpsolAPlLKYCiUA+USmyiUA6UkpJSEoB8pJTZSZkA5KCmyiUA+Uq5ynSgHJEkolAKlTZSSgHyhNlEoB0olNlEoBZRKaiUA9ISklISgFlJKbKJQDkSmyklAPlEpEkoBZQkQgGoQhACVCEABKhCAVCEIASIQgBMKEIBQnIQgFQhCAEIQgBAQhAKkQhAKhCEAiEIQAkKVCARCEIAQhCAE1CEA5CEID//2Q=="})})},de=c(11),je=c(248),ue=c(249),be=c(9).useLocation;var xe=function(){return new URLSearchParams(be().search)};var me=function(e){return Object(D.jsxs)("div",{className:"border rounded py-1 ",style:{height:"97vh"},children:[Object(D.jsx)("h6",{className:"text-center",children:e.title}),e.children]})},he=J()().format("YYYY-MM-DD");var Oe=function(e){var t=e.from,c=void 0===t?he:t,n=e.to,a=void 0===n?he:n,r=e.handleChange,s=void 0===r?function(e){return e}:r;return Object(D.jsxs)("div",{className:"row",children:[Object(D.jsx)("div",{className:"col-md-4",children:Object(D.jsx)("div",{children:Object(D.jsx)(Q.a,{controlId:"inputTo",label:"From:",className:"mb-3",style:{fontWeight:"bold"},children:Object(D.jsx)(P.a.Control,{type:"date",value:c,name:"from",onChange:s})})})}),Object(D.jsx)("div",{className:"col-md-4"}),Object(D.jsx)("div",{className:"col-md-4",children:Object(D.jsx)("div",{children:Object(D.jsx)(Q.a,{controlId:"inputTo",label:"To:",className:"mb-3",style:{fontWeight:"bold"},children:Object(D.jsx)(P.a.Control,{type:"date",value:a,name:"to",onChange:s})})})})]})};var pe=function(e){var t=e.drug_code,c=J()().format("YYYY-MM-DD"),a=J()(c).add("1","months").format("YYYY-MM-DD"),r=J()(c).subtract("6","months").format("YYYY-MM-DD"),s=Object(n.useState)({from:r,to:a}),l=Object(p.a)(s,2),o=l[0],j=l[1],u=Object(n.useState)([]),b=Object(p.a)(u,2),x=b[0],m=b[1],h=Object(n.useState)(!1),O=Object(p.a)(h,2),f=O[0],g=O[1],v=Object(n.useCallback)(Object(i.a)(d.a.mark((function e(){var c,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(!0),e.next=4,window.contract.viewDrugHistory();case 4:c=e.sent,console.log(c),n=[],c.forEach((function(e){J()(e.receive_date).isBetween(o.from,o.to)&&e.drug_code===t&&n.push(e)})),m(n),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.log({error:e.t0}),g(!1);case 15:return e.prev=15,g(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,11,15,18]])}))),[t,o.to,o.from]);return Object(n.useEffect)((function(){v()}),[v]),Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(Oe,{from:o.from,to:o.to,handleChange:function(e){var t=e.target,c=t.name,n=t.value;j((function(e){return Object(S.a)(Object(S.a)({},e),{},Object(de.a)({},c,n))}))}}),f?Object(D.jsx)(_,{}):"",Object(D.jsxs)(je.a,{striped:!0,bordered:!0,className:"mt-2",children:[Object(D.jsx)("thead",{children:Object(D.jsxs)("tr",{children:[Object(D.jsx)("th",{className:"text-center",children:"Receive Date"}),Object(D.jsx)("th",{className:"text-center",children:"Drug Name"}),Object(D.jsx)("th",{className:"text-center",children:"Qty In"}),Object(D.jsx)("th",{className:"text-center",children:"Qty Out"}),Object(D.jsx)("th",{className:"text-center",children:"Selling Price"}),Object(D.jsx)("th",{className:"text-center",children:"Owner"})]})}),Object(D.jsx)("tbody",{children:x&&x.map((function(e,t){return Object(D.jsxs)("tr",{children:[Object(D.jsx)("td",{className:"text-end",children:e.receive_date}),Object(D.jsx)("td",{children:e.drug_name}),Object(D.jsx)("td",{className:"text-center",children:e.qty_in}),Object(D.jsx)("td",{className:"text-center",children:e.qty_out}),Object(D.jsx)("td",{className:"text-end",children:e.selling_price}),Object(D.jsx)("td",{children:e.owner})]},t)}))})]}),x.length?"":Object(D.jsxs)(ue.a,{size:"sm",className:"text-center",children:[" ","No data to display"]})]})},fe=function(){var e=Object(O.useNavigate)(),t=xe().get("drug_code"),c=Object(n.useState)(!1),a=Object(p.a)(c,2),r=a[0],s=a[1],l=Object(n.useState)([]),o=Object(p.a)(l,2),j=o[0],u=o[1],b=Object(n.useState)([]),x=Object(p.a)(b,2),m=x[0],h=x[1],f=Object(n.useState)(!1),g=Object(p.a)(f,2),v=g[0],N=g[1],A=Object(n.useState)([]),y=Object(p.a)(A,2),w=y[0],C=y[1],E=Object(n.useCallback)(Object(i.a)(d.a.mark((function e(){var t,c,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),e.next=4,L();case 4:t=e.sent,console.log(t),c=[],n=[],a=[],t&&t.map((function(e){return c.push(Object(S.a)(Object(S.a)({},e),{},{enable:!1}))})),u(c),t.forEach((function(e){e.reorder_level>=e.balance&&n.push(e)})),t.forEach((function(e){J()().add("1","month").diff(e.expiry_date)>0&&a.push(e)})),h(n),C(a),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),console.log({error:e.t0}),s(!1);case 21:return e.prev=21,s(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[0,17,21,24]])}))),[]),I=function(){var e=Object(i.a)(d.a.mark((function e(t,c){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,N(!0),e.next=4,z(t,c);case 4:E(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),N(!1);case 10:return e.prev=10,N(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(t,c){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){E()}),[E]);var q=function(e,t){var c=[];j.forEach((function(n,a){t===a?c.push(Object(S.a)(Object(S.a)({},e),{},{enable:!e.enable})):c.push(Object(S.a)(Object(S.a)({},n),{},{enable:!1}))})),u(c)};return Object(D.jsxs)("div",{className:" m-0 row mt-3",children:[Object(D.jsx)("div",{className:"col-md-2",children:Object(D.jsx)(me,{title:"Reorder Alert",children:Object(D.jsx)("ul",{style:{padding:2},children:m.map((function(e,t){return Object(D.jsxs)(je.a,{children:[e.drug_name," ",Object(D.jsx)("b",{children:"(Quantity Remaining  ".concat(e.balance,")")})]},t)}))})})}),Object(D.jsx)("div",{className:"col-md-8",children:Object(D.jsxs)(B.a,{centered:!0,style:{height:"97vh"},children:[Object(D.jsx)(B.a.Header,{children:Object(D.jsx)(B.a.Title,{children:Object(D.jsxs)(R.a,{children:[Object(D.jsx)(H.a,{md:5,children:Object(D.jsxs)(k.a,{size:"sm",variant:"dark",onClick:function(){return e(-1)},children:["Back ",Object(D.jsx)("i",{className:"bi arrow-back"})]})}),Object(D.jsx)(H.a,{md:3,children:Object(D.jsx)("div",{className:"text-center",children:t?"Drug History":"Drugs Inventory"})})]})})}),Object(D.jsxs)(B.a.Body,{children:[t?null:Object(D.jsx)(k.a,{variant:"dark",size:"sm",onClick:function(){e("/add-new-drug")},children:"Add New Drug"}),r&&null===t?Object(D.jsx)(_,{}):"",t?Object(D.jsx)(pe,{drug_code:t}):Object(D.jsxs)(je.a,{striped:!0,bordered:!0,className:"mt-2",children:[Object(D.jsx)("thead",{children:Object(D.jsxs)("tr",{children:[Object(D.jsx)("th",{className:"text-center",children:"Edit"}),Object(D.jsx)("th",{className:"text-center",children:"Supplier Name"}),Object(D.jsx)("th",{className:"text-center",children:"Drug Name"}),Object(D.jsx)("th",{className:"text-center",children:"Quantity"}),Object(D.jsx)("th",{className:"text-center",children:"Selling Price"}),Object(D.jsx)("th",{className:"text-center",children:"Owner"}),Object(D.jsx)("th",{className:"text-center",children:"Action"})]})}),Object(D.jsx)("tbody",{children:j&&j.map((function(t,c){return Object(D.jsxs)("tr",{children:[Object(D.jsx)("td",{className:"text-center",children:t.enable?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(k.a,{size:"sm",variant:"dark",onClick:function(){I(t.drug_code,t.selling_price)},children:v?Object(D.jsx)(X.a,{animation:"border",role:"status",size:"sm",className:"opacity-25"}):"Update"}),"  ",Object(D.jsx)(k.a,{size:"sm",variant:"outline-dark",outline:!0,onClick:function(){q(t,c)},children:"Cancel"})]}):Object(D.jsx)(k.a,{size:"sm",variant:"dark",onClick:function(){q(t,c)},children:"edit"})}),Object(D.jsx)("td",{children:t.supplier_name}),Object(D.jsx)("td",{children:"".concat(t.drug_name," (").concat(t.generic_name,")")}),Object(D.jsx)("td",{className:"text-center",children:t.balance}),Object(D.jsx)("td",{className:"text-end",children:t.enable?Object(D.jsx)(P.a.Control,{type:"number",placeholder:"Enter Selling Price",size:"sm",value:t.selling_price,onChange:function(e){var n=e.target.value;!function(e,t,c){var n=[];j.forEach((function(a,r){t===r?n.push(Object(S.a)(Object(S.a)({},e),{},{selling_price:c})):n.push(a)})),u(n)}(t,c,n)},className:"text-end"}):t.selling_price}),Object(D.jsx)("td",{children:t.owner}),Object(D.jsx)("td",{className:"text-center",children:Object(D.jsx)(k.a,{size:"sm",variant:"dark",onClick:function(){e("/inventory?drug_code=".concat(t.drug_code))},children:"view"})})]},c)}))})]}),j.length||null!==t?"":Object(D.jsxs)(ue.a,{size:"sm",className:"text-center",children:[" ","No data to display"]})]})]})}),Object(D.jsx)("div",{className:"col-md-2",children:Object(D.jsx)(me,{title:"Expiry Alert",children:Object(D.jsx)("ul",{style:{padding:2},children:w.map((function(e,t){return Object(D.jsxs)(je.a,{children:[e.drug_name," ",Object(D.jsx)("b",{children:"(Expires ".concat(J()(e.expiry_date).endOf("day").fromNow(),")")})]},t)}))})})})]})};var ge=function(){var e=Object(O.useNavigate)(),t=Object(n.useState)({drug_name:"",price:"0",expiry_date:"",selling_price:"",supplier_name:"",generic_name:"",unit_of_issue:"",balance:0,image:"",reorder_level:""}),c=Object(p.a)(t,2),a=c[0],r=c[1],s=Object(n.useState)(!1),l=Object(p.a)(s,2),o=l[0],j=l[1],u=function(e){var t=e.target,c=t.name,n=t.value;r((function(e){return Object(S.a)(Object(S.a)({},e),{},Object(de.a)({},c,n))}))},b=function(){var t=Object(i.a)(d.a.mark((function t(c){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,j(!0),t.next=4,V(c).then((function(e){console.log(e)}));case 4:Object(I.b)(Object(D.jsx)(te,{text:"Drug added successfully."})),e(-1),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(0),console.log({error:t.t0}),Object(I.b)(Object(D.jsx)(ce,{text:"Failed to create a drug."})),j(!1);case 13:return t.prev=13,j(!1),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[0,8,13,16]])})));return function(e){return t.apply(this,arguments)}}();return Object(D.jsx)(f.a,{className:"mt-2",children:Object(D.jsxs)(B.a,{centered:!0,children:[Object(D.jsx)(B.a.Header,{children:Object(D.jsx)(B.a.Title,{children:Object(D.jsxs)(R.a,{children:[Object(D.jsx)(H.a,{md:5,children:Object(D.jsxs)(k.a,{size:"sm",variant:"dark",onClick:function(){return e(-1)},children:["Back ",Object(D.jsx)("i",{className:"bi arrow-back"})]})}),Object(D.jsx)(H.a,{md:2,children:Object(D.jsx)("div",{className:"text-center",children:"New Drug"})})]})})}),Object(D.jsx)(P.a,{children:Object(D.jsx)(B.a.Body,{children:Object(D.jsxs)(R.a,{children:[Object(D.jsx)(H.a,{sm:6,children:Object(D.jsx)(Q.a,{controlId:"inputSupplierName",label:"Supplier Name",className:"mb-3",children:Object(D.jsx)(P.a.Control,{type:"text",name:"supplier_name",onChange:u,className:"size-sm",value:a.supplier_name,placeholder:"Enter  supplier name"})})}),Object(D.jsx)(H.a,{sm:6,children:Object(D.jsx)(Q.a,{controlId:"inputDrugName",label:"Drug Name",className:"mb-3",children:Object(D.jsx)(P.a.Control,{type:"text",name:"drug_name",onChange:u,className:"size-sm",value:a.drug_name,placeholder:"Enter drug name"})})}),Object(D.jsx)(H.a,{sm:6,children:Object(D.jsx)(Q.a,{controlId:"inputGenericName",label:"Generic Name",className:"mb-3",children:Object(D.jsx)(P.a.Control,{type:"text",name:"generic_name",onChange:u,className:"size-sm",value:a.generic_name,placeholder:"Enter generic name"})})}),Object(D.jsx)(H.a,{sm:6,children:Object(D.jsx)(Q.a,{controlId:"inputreoderLevel",label:"Reorder Level",className:"mb-3",children:Object(D.jsx)(P.a.Control,{type:"text",name:"reorder_level",onChange:u,className:"size-sm",value:a.reorder_level,placeholder:"Enter reoder level"})})}),Object(D.jsx)(H.a,{sm:6,children:Object(D.jsx)(Q.a,{controlId:"inputDrugImage",label:"Image Url",className:"mb-3",children:Object(D.jsx)(P.a.Control,{type:"text",name:"image",onChange:u,className:"size-sm",value:a.image,placeholder:"Enter image url"})})}),Object(D.jsx)(H.a,{sm:6,children:Object(D.jsx)(Q.a,{controlId:"inputDrugQuantity",label:"Quantity",className:"mb-3",children:Object(D.jsx)(P.a.Control,{type:"number",name:"balance",onChange:u,className:"size-sm",value:a.balance,placeholder:"Enter Quantity"})})}),Object(D.jsx)(H.a,{sm:6,children:Object(D.jsx)(Q.a,{controlId:"inputDrugPrice",label:"Price",className:"mb-3",children:Object(D.jsx)(P.a.Control,{type:"text",name:"price",onChange:u,className:"size-sm",value:a.price,placeholder:"Enter price"})})}),Object(D.jsx)(H.a,{sm:6,children:Object(D.jsx)(Q.a,{controlId:"inputDrugSellingPrice",label:"Selling Price",className:"mb-3",children:Object(D.jsx)(P.a.Control,{type:"text",name:"selling_price",onChange:u,className:"size-sm",value:a.selling_price,placeholder:"Enter selling price"})})}),Object(D.jsx)(H.a,{sm:6,children:Object(D.jsx)(Q.a,{controlId:"inputUOI",label:"Unit of issue",className:"mb-3",children:Object(D.jsx)(P.a.Control,{type:"number",name:"unit_of_issue",onChange:u,className:"size-sm",value:a.unit_of_issue,placeholder:"Enter unit of issue"})})}),Object(D.jsx)(H.a,{sm:6,children:Object(D.jsx)(Q.a,{controlId:"inputExpiryDate",label:"Expiry Date",className:"mb-3",children:Object(D.jsx)(P.a.Control,{type:"date",name:"expiry_date",onChange:u,className:"size-sm",value:a.expiry_date,placeholder:"Enter expiry date"})})})]})})}),Object(D.jsx)(B.a.Footer,{children:Object(D.jsx)("div",{className:"text-center",children:Object(D.jsx)(k.a,{variant:"dark",disabled:!(a.drug_name&&a.image&&a.balance&&a.selling_price&&a.price),onClick:function(){b(a)},children:o?Object(D.jsx)(X.a,{animation:"border",role:"status",size:"sm",className:"opacity-25"}):"Save product"})})})]})})},ve=function(){return Object(D.jsxs)(O.Routes,{children:[Object(D.jsx)(O.Route,{path:"/",element:Object(D.jsx)(O.Navigate,{replace:!0,to:"/near-maketplace-dapp"})}),Object(D.jsx)(O.Route,{path:"/near-maketplace-dapp",element:Object(D.jsx)(oe,{})}),Object(D.jsx)(O.Route,{path:"/inventory",element:Object(D.jsx)(fe,{})}),Object(D.jsx)(O.Route,{path:"/add-new-drug",element:Object(D.jsx)(ge,{})})]})};window.nearInitPromise=function(){return m.apply(this,arguments)}().then((function(){s.a.render(Object(D.jsxs)(a.a.StrictMode,{children:[Object(D.jsx)(ee,{}),Object(D.jsx)(h.a,{children:Object(D.jsx)(ve,{})})]}),document.getElementById("root"))})).catch(console.error),l()}},[[237,1,2]]]);
//# sourceMappingURL=main.5e8a2eb8.chunk.js.map